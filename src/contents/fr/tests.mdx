import SvgComponent from '../../components/SvgComponent';
import VegaComponent from '../../components/VegaComponent';
import SigmaComponent from '../../components/SigmaComponent';
import GeoComponent from '../../components/GeoComponent';
import TriangleComponent from '../../components/TriangleComponent';
import BoatsIllustration from '../../components/BoatsIllustration';
import BezierComponent from '../../components/BezierComponent';
import DataProvider from '../../components/DataProvider';
import LineChart from '../../components/LineChart';

## Test courbes de bézier
<BezierComponent
  dataFilename="part_3_step3_viz_customs_offices_data.csv"
  />
  

## Test triangle 
<TriangleComponent 
  dataFilename="part_3_step1_viz_data.csv" 
  rowHeight={300}
  numberOfColumns = {25}
  totalWidth = {1600}
  />


## Carto en react+d3+SVG

Ci-dessous un proto/boilerplate pour rendre du svg + données avec la galaxie d3 + du rendu direct en SVG via react.


# Fond de carte centré sur région, avec 1 pt discret par port, tourné à 90° ou 270°
<GeoComponent 
  backgroundFilename="cartoweb_france_1789_geojson.geojson" 
  dataFilename="navigo-out-of-ships-from-region.csv"
  markerColor="null"
  markerSize="null"
  label="pointcall"
  showLabels
  centerOnRegion
  // rotationDegree={58}
  debug="true"
/>

Cartographie des destination des bateaux aillant un port d'attache dans la région, par tonnage cumulé (couleur = amirauté) :

<GeoComponent 
  backgroundFilename="cartoweb_france_1789_geojson.geojson" 
  dataFilename="navigo-out-of-ships-from-region.csv"
  markerColor="pointcall_admiralty"
  markerSize="tonnage"
  label="pointcall"
  showLabels
  centerOnRegion
/>

<GeoComponent 
  backgroundFilename="cartoweb_france_1789_geojson.geojson" 
  dataFilename="navigo-out-of-ships-from-region.csv"
  markerColor="pointcall_admiralty"
  markerSize="tonnage"
/>

<GeoComponent 
  backgroundFilename="cartoweb_france_1789_geojson.geojson" 
  dataFilename="navigo-out-of-ships-from-region.csv"
  markerColor="pointcall_admiralty"
  markerSize="tonnage"
  label="pointcall"
  showLabels
/>


# Test bateaux

<BoatsIllustration />


# Commerce multi-échelle dans la région de La Rochelle


Voici un tour d'horizon des modules react préparés pour faciliter le développement :

## Image SVG (avec webpack)

On intègre une image  SVG depuis le local (elle sera donc packée par webpack) :


## Image SVG (sans webpack)

On intègre ici directement une image à partir de son URL en ligne (depuis le dossier `public`)
##### ! cassé pour le moment
// <SvgComponent path ="/svg/ports-region-1789.svg" />

## Visualisation vega

Les visualisations vega ont besoin d'un fichier csv stocké dans le dossier `public/data` et d'une spec vega.

<VegaComponent 
  data="sorties_navires_vers_colonies.csv" 
  spec={{
    "mark": "rect",
    "encoding": {
      "x": {
        "field": "port_depart",
        "type": "nominal"
      },
      "y": {
        "field": "port_destination",
        "type": "nominal"
      },
      "color": {
        "type": "quantitative",
        "field": "tonnage",
        "aggregate": "sum"
      }
      
    }
  }}
/>

## Réseau avec sigma

Les visualisations sigma ont besoin d'un fichier gexf stocké dans le dossier `public/data`.

Paramètres :

* `nodeColor` : attribut pour couleur
* `nodeSize` : attribut pour taille
* `labelDensity` : densité des labels (float dans [0, 1])


<SigmaComponent 
  data="toflit_aggregate_1789_only_out.gexf" 
  nodeColor={`admiralty`}
  nodeSize={`inside_degree`}
  labelDensity={0.5}
/>



# Tests composants de visualisation statistique simple

<DataProvider data={'decline_longitudinal_data.csv'}>
  {
    data => (
      <LineChart
        data={data.filter(d => d.region === 'France')}
        width={window.innerWidth - 20}
        x={{
          field: 'year',
          title: 'année',
          tickSpan: 5,
        }}
        y={{
          field: 'Imports',
          title: 'imports',
          tickSpan: 100000000,
          tickFormat: v => `${v} lt.`
        }}
        tooltip={d => `import de ${d.Imports} en ${d.year}`}
      />
    )
  }
</DataProvider>

<DataProvider data={'decline_longitudinal_data.csv'}>
  {
    data => (
      <LineChart
        data={data}
        title="test de titre"
        width={window.innerWidth - 20}
        x={{
          field: 'year',
          title: 'année',
          tickSpan: 10,
        }}
        y={{
          field: 'Imports',
          title: 'imports',
          tickSpan: 100000000,
          tickFormat: v => `${v} lt.`
        }}
        color={{
          field: 'region',
          title: 'Région'
        }}
        tooltip={d => `import de ${d.Imports} en ${d.year} pour ${d.region}`}
      />
    )
  }
</DataProvider>

<DataProvider data={'decline_longitudinal_data.csv'}>
  {
    data => (
      <LineChart
        data={data}
        title="test de line chart (fill gaps)"
        width={window.innerWidth - 20}
        x={{
          field: 'year',
          title: 'année',
          tickSpan: 10,
        }}
        y={{
          field: 'Imports',
          title: 'imports',
          tickSpan: 100000000,
          tickFormat: v => `${v} lt.`,
          fillGaps: true
        }}
        color={{
          field: 'region',
          title: 'Région'
        }}
        tooltip={d => `import de ${d.Imports} en ${d.year} pour ${d.region}`}
      />
    )
  }
</DataProvider>

<DataProvider data={'decline_longitudinal_data.csv'}>
  {
    data => (
      <LineChart
        data={data}
        title="test de linechart (minimum de props)"
        // width={window.innerWidth - 20}
        x={{
          field: 'year',
          // title: 'année',
        }}
        y={{
          field: 'Imports',
          // title: 'imports',
          // tickSpan: 100000000,
          // tickFormat: v => `${v} lt.`
        }}
        color={{
          field: 'region',
          // title: 'Région'
        }}
        // tooltip={d => `import de ${d.Imports} en ${d.year} pour ${d.region}`}
      />
    )
  }
</DataProvider>